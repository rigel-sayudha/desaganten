@echo off
chcp 65001 >nul
title Sistem Surat Keterangan - Google Drive Package Creator

echo.
echo ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
echo ‚ñà‚ñà                                                            ‚ñà‚ñà
echo ‚ñà‚ñà         üì¶ GOOGLE DRIVE PACKAGE CREATOR üì¶                 ‚ñà‚ñà
echo ‚ñà‚ñà                                                            ‚ñà‚ñà
echo ‚ñà‚ñà              Sistem Surat Keterangan Desa Ganten          ‚ñà‚ñà
echo ‚ñà‚ñà                                                            ‚ñà‚ñà
echo ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
echo.

set PROJECT_DIR=%cd%
set PACKAGE_DIR=%PROJECT_DIR%\google-drive-package
set ZIP_NAME=desaganten-sistem-surat-keterangan-v2.0.zip

echo üìÅ Project Directory: %PROJECT_DIR%
echo üì¶ Package Directory: %PACKAGE_DIR%
echo üìÑ ZIP File: %ZIP_NAME%
echo.

:: Create package directory
echo ===============================================
echo üìÅ [1/6] Creating Package Directory...
echo ===============================================

if exist "%PACKAGE_DIR%" (
    echo Removing existing package directory...
    rmdir /s /q "%PACKAGE_DIR%"
)

mkdir "%PACKAGE_DIR%"
echo ‚úÖ Package directory created
echo.

:: Copy project files
echo ===============================================
echo üìã [2/6] Copying Project Files...
echo ===============================================

echo Copying Laravel project files...
xcopy "%PROJECT_DIR%" "%PACKAGE_DIR%\project" /E /I /H /Y /Q ^
    /EXCLUDE:%PROJECT_DIR%\package-exclude.txt >nul 2>&1

if not %errorLevel% equ 0 (
    echo Creating exclude file and retrying...
    
    :: Create exclude file
    echo node_modules > "%PROJECT_DIR%\package-exclude.txt"
    echo .git >> "%PROJECT_DIR%\package-exclude.txt"
    echo storage\logs >> "%PROJECT_DIR%\package-exclude.txt"
    echo storage\framework\cache >> "%PROJECT_DIR%\package-exclude.txt"
    echo storage\framework\sessions >> "%PROJECT_DIR%\package-exclude.txt"
    echo storage\framework\views >> "%PROJECT_DIR%\package-exclude.txt"
    echo bootstrap\cache >> "%PROJECT_DIR%\package-exclude.txt"
    echo google-drive-package >> "%PROJECT_DIR%\package-exclude.txt"
    echo *.zip >> "%PROJECT_DIR%\package-exclude.txt"
    echo *.log >> "%PROJECT_DIR%\package-exclude.txt"
    echo .env >> "%PROJECT_DIR%\package-exclude.txt"
    
    :: Copy again with exclusions
    robocopy "%PROJECT_DIR%" "%PACKAGE_DIR%\project" /E /XF *.zip *.log .env /XD node_modules .git "google-drive-package" "storage\logs" "storage\framework\cache" "storage\framework\sessions" "storage\framework\views" "bootstrap\cache" >nul
)

echo ‚úÖ Project files copied
echo.

:: Create installation guide
echo ===============================================
echo üìù [3/6] Creating Installation Guide...
echo ===============================================

echo Creating quick start guide...
> "%PACKAGE_DIR%\README-INSTALASI.txt" (
    echo ========================================================================
    echo    SISTEM SURAT KETERANGAN DESA GANTEN - PANDUAN INSTALASI CEPAT
    echo ========================================================================
    echo.
    echo üéØ LANGKAH CEPAT INSTALASI:
    echo.
    echo 1. PERSIAPAN SOFTWARE:
    echo    - Download dan install XAMPP ^(PHP 8.1+^): https://www.apachefriends.org/
    echo    - Download dan install Composer: https://getcomposer.org/download/
    echo    - Download dan install Node.js: https://nodejs.org/
    echo.
    echo 2. SETUP PROJECT:
    echo    - Extract file ini ke: C:\xampp\htdocs\
    echo    - Buka Command Prompt sebagai Administrator
    echo    - Masuk ke folder project: cd C:\xampp\htdocs\project
    echo    - Jalankan: INSTALL.bat
    echo    - Ikuti instruksi yang muncul
    echo.
    echo 3. SETUP DATABASE:
    echo    - Start XAMPP ^(Apache + MySQL^)
    echo    - Buka http://localhost/phpmyadmin
    echo    - Buat database baru dengan nama: desaganten
    echo.
    echo 4. TEST APLIKASI:
    echo    - Jalankan: php artisan serve
    echo    - Buka browser: http://localhost:8000
    echo    - Login admin: admin@desa.com / password
    echo.
    echo ========================================================================
    echo.
    echo üìö DOKUMENTASI LENGKAP:
    echo    Baca file: TUTORIAL_INSTALASI_GOOGLE_DRIVE.md
    echo.
    echo üÜò SUPPORT:
    echo    - GitHub: https://github.com/rigel-sayudha/desaganten
    echo    - Email: rigel.sayudha@example.com
    echo.
    echo üéâ SELAMAT MENGGUNAKAN SISTEM SURAT KETERANGAN DESA GANTEN!
    echo ========================================================================
)

echo ‚úÖ Installation guide created
echo.

:: Create auto-installer
echo ===============================================
echo üîß [4/6] Copying Auto-Installer...
echo ===============================================

if exist "%PROJECT_DIR%\INSTALL.bat" (
    copy "%PROJECT_DIR%\INSTALL.bat" "%PACKAGE_DIR%\project\INSTALL.bat" >nul
    echo ‚úÖ Auto-installer copied
) else (
    echo ‚ö†Ô∏è  Auto-installer not found, skipping...
)
echo.

:: Create system requirements file
echo ===============================================
echo üìã [5/6] Creating System Requirements...
echo ===============================================

> "%PACKAGE_DIR%\SYSTEM-REQUIREMENTS.txt" (
    echo ========================================================================
    echo                    SYSTEM REQUIREMENTS
    echo ========================================================================
    echo.
    echo üíª MINIMUM SYSTEM REQUIREMENTS:
    echo.
    echo Operating System:
    echo    ‚úÖ Windows 10/11 ^(64-bit^)
    echo    ‚úÖ macOS 10.15+ 
    echo    ‚úÖ Linux Ubuntu 18.04+
    echo.
    echo Hardware:
    echo    ‚úÖ CPU: Intel Core i3 atau AMD equivalent
    echo    ‚úÖ RAM: 4GB minimum, 8GB recommended
    echo    ‚úÖ Storage: 2GB free space minimum
    echo    ‚úÖ Network: Internet connection untuk instalasi
    echo.
    echo Software Requirements:
    echo    ‚úÖ PHP 8.1 atau lebih baru
    echo    ‚úÖ MySQL 8.0 atau MariaDB 10.3+
    echo    ‚úÖ Apache 2.4+ atau Nginx
    echo    ‚úÖ Composer ^(latest version^)
    echo    ‚úÖ Node.js 16+ dan NPM 8+
    echo.
    echo PHP Extensions Required:
    echo    ‚úÖ OpenSSL PHP Extension
    echo    ‚úÖ PDO PHP Extension
    echo    ‚úÖ Mbstring PHP Extension
    echo    ‚úÖ Tokenizer PHP Extension
    echo    ‚úÖ XML PHP Extension
    echo    ‚úÖ Ctype PHP Extension
    echo    ‚úÖ JSON PHP Extension
    echo    ‚úÖ BCMath PHP Extension
    echo    ‚úÖ Fileinfo PHP Extension
    echo    ‚úÖ GD PHP Extension
    echo.
    echo üöÄ RECOMMENDED FOR PRODUCTION:
    echo    ‚úÖ SSL Certificate
    echo    ‚úÖ Backup Solution
    echo    ‚úÖ Monitoring Tools
    echo    ‚úÖ CDN ^(for better performance^)
    echo.
    echo ========================================================================
)

echo ‚úÖ System requirements created
echo.

:: Create version info
echo ===============================================
echo üìÑ [6/6] Creating Version Info...
echo ===============================================

> "%PACKAGE_DIR%\VERSION-INFO.txt" (
    echo ========================================================================
    echo                    VERSION INFORMATION
    echo ========================================================================
    echo.
    echo üì¶ Package Information:
    echo    Name: Sistem Surat Keterangan Desa Ganten
    echo    Version: 2.0.0
    echo    Release Date: September 2, 2025
    echo    Package Type: Complete Installation Package
    echo.
    echo üõ†Ô∏è Technical Stack:
    echo    Framework: Laravel 10.x
    echo    PHP Version: 8.1+
    echo    Database: MySQL 8.0
    echo    Frontend: Tailwind CSS 3.x
    echo    PDF Generation: DomPDF
    echo    Icons: Font Awesome 6.x
    echo.
    echo ‚ú® Features Included:
    echo    ‚úÖ 10 Complete Surat Keterangan Types
    echo    ‚úÖ Admin Panel with Advanced Filtering
    echo    ‚úÖ User Dashboard with Data Isolation
    echo    ‚úÖ PDF Generation System
    echo    ‚úÖ Mobile Responsive Design
    echo    ‚úÖ Security Implementation
    echo    ‚úÖ Multi-device Network Access
    echo    ‚úÖ Comprehensive Report System
    echo.
    echo üß™ Testing Status:
    echo    ‚úÖ Functional Testing: PASSED
    echo    ‚úÖ Security Testing: PASSED
    echo    ‚úÖ Mobile Testing: PASSED
    echo    ‚úÖ PDF Generation: PASSED
    echo    ‚úÖ User Isolation: PASSED
    echo    ‚úÖ Cross-browser: PASSED
    echo.
    echo üë®‚Äçüíª Developer Information:
    echo    Developer: Rigel Sayudha
    echo    GitHub: https://github.com/rigel-sayudha
    echo    Email: rigel.sayudha@example.com
    echo.
    echo üìà Changelog v2.0.0:
    echo    - Complete system implementation
    echo    - All 10 surat types working with PDF download
    echo    - Advanced admin panel with filtering ^& pagination
    echo    - User dashboard with personal data isolation
    echo    - Mobile-responsive design tested on iOS/Android
    echo    - Comprehensive security implementation
    echo    - Professional PDF report generation
    echo    - Complete documentation ^& testing
    echo.
    echo üéØ Production Ready Status:
    echo    This version is fully tested and ready for production deployment.
    echo    All features have been verified and documented.
    echo.
    echo ========================================================================
)

echo ‚úÖ Version info created
echo.

:: Success message
echo.
echo ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
echo ‚ñà‚ñà                                                            ‚ñà‚ñà
echo ‚ñà‚ñà              üéâ PACKAGE CREATION SUCCESSFUL! üéâ            ‚ñà‚ñà
echo ‚ñà‚ñà                                                            ‚ñà‚ñà
echo ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
echo.
echo ‚úÖ Google Drive package berhasil dibuat!
echo.
echo üìÅ Package Location: %PACKAGE_DIR%
echo.
echo üìã Package Contents:
echo    üìÅ project/                    - Laravel application files
echo    üìÑ README-INSTALASI.txt        - Quick installation guide
echo    üìÑ SYSTEM-REQUIREMENTS.txt     - System requirements
echo    üìÑ VERSION-INFO.txt            - Version information
echo.
echo üöÄ Next Steps:
echo 1. Zip the package folder
echo 2. Upload to Google Drive
echo 3. Set sharing permissions
echo 4. Share the link with clients/users
echo.

set /p create_zip="Apakah ingin membuat ZIP file sekarang? (Y/N): "
if /i "%create_zip%" equ "Y" (
    echo.
    echo üì¶ Creating ZIP file...
    
    :: Use PowerShell to create ZIP (works on Windows 10+)
    powershell -command "Compress-Archive -Path '%PACKAGE_DIR%\*' -DestinationPath '%PROJECT_DIR%\%ZIP_NAME%' -Force"
    
    if exist "%PROJECT_DIR%\%ZIP_NAME%" (
        echo ‚úÖ ZIP file created: %ZIP_NAME%
        echo üìè File size:
        for %%I in ("%PROJECT_DIR%\%ZIP_NAME%") do echo    %%~zI bytes
        echo.
        echo üåê Ready to upload to Google Drive!
    ) else (
        echo ‚ùå Failed to create ZIP file
        echo Please manually zip the package folder
    )
)

echo.
echo üì§ Upload Instructions:
echo 1. Upload ZIP file to Google Drive
echo 2. Right-click ^> Get link
echo 3. Set to "Anyone with the link can view"
echo 4. Share the link for easy installation
echo.

echo Tekan tombol apa saja untuk keluar...
pause >nul
